import{s as mt,m as it,n as ot,r as ct,b as ft}from"../chunks/scheduler.b1a79d81.js";import{S as pt,i as bt,g as u,s as U,m as vt,h as d,j as A,I as x,c as k,f as w,n as ht,k as n,a as _t,y as l}from"../chunks/index.a519e2c0.js";import{p as yt}from"../chunks/parse.bee59afc.js";import{j as gt}from"../chunks/singletons.abcc4f62.js";import{a as Et}from"../chunks/navigation.64a0befd.js";function wt(t){return gt.apply_action(t)}function Lt(t){const s=JSON.parse(t);return s.data&&(s.data=yt(s.data)),s}function ut(t){return HTMLElement.prototype.cloneNode.call(t)}function dt(t,s=()=>{}){const e=async({action:r,result:v,reset:h})=>{v.type==="success"&&(h!==!1&&HTMLFormElement.prototype.reset.call(t),await Et()),(location.origin+location.pathname===r.origin+r.pathname||v.type==="redirect"||v.type==="error")&&wt(v)};async function p(r){var b,N,c,C;if(((b=r.submitter)!=null&&b.hasAttribute("formmethod")?r.submitter.formMethod:ut(t).method)!=="post")return;r.preventDefault();const h=new URL((N=r.submitter)!=null&&N.hasAttribute("formaction")?r.submitter.formAction:ut(t).action),a=new FormData(t),_=(c=r.submitter)==null?void 0:c.getAttribute("name");_&&a.append(_,((C=r.submitter)==null?void 0:C.getAttribute("value"))??"");const y=new AbortController;let g=!1;const B=await s({action:h,cancel:()=>g=!0,controller:y,get data(){return a},formData:a,get form(){return t},formElement:t,submitter:r.submitter})??e;if(g)return;let E;try{const i=await fetch(h,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:a,signal:y.signal});E=Lt(await i.text()),E.type==="error"&&(E.status=i.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;E={type:"error",error:i}}B({action:h,get data(){return a},formData:a,get form(){return t},formElement:t,update:i=>e({action:h,result:E,reset:i==null?void 0:i.reset}),result:E})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",p),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",p)}}}function Nt(t){let s,e,p,r,v="Email",h,a,_,y,g,L,B="Full Name",E,b,N,c,C,i,tt="Username",G,I,H,K,S,M,et="Website",Q,T,j,X,R,D,z,Y,F,q,O,Z,$,at;return{c(){s=u("div"),e=u("form"),p=u("div"),r=u("label"),r.textContent=v,h=U(),a=u("input"),y=U(),g=u("div"),L=u("label"),L.textContent=B,E=U(),b=u("input"),c=U(),C=u("div"),i=u("label"),i.textContent=tt,G=U(),I=u("input"),K=U(),S=u("div"),M=u("label"),M.textContent=et,Q=U(),T=u("input"),X=U(),R=u("div"),D=u("input"),Y=U(),F=u("form"),q=u("div"),O=u("button"),Z=vt("Sign Out"),this.h()},l(o){s=d(o,"DIV",{class:!0});var m=A(s);e=d(m,"FORM",{class:!0,method:!0,action:!0});var f=A(e);p=d(f,"DIV",{});var P=A(p);r=d(P,"LABEL",{for:!0,"data-svelte-h":!0}),x(r)!=="svelte-1p9d3fm"&&(r.textContent=v),h=k(P),a=d(P,"INPUT",{id:!0,type:!0}),P.forEach(w),y=k(f),g=d(f,"DIV",{});var V=A(g);L=d(V,"LABEL",{for:!0,"data-svelte-h":!0}),x(L)!=="svelte-1mpbi88"&&(L.textContent=B),E=k(V),b=d(V,"INPUT",{id:!0,name:!0,type:!0}),V.forEach(w),c=k(f),C=d(f,"DIV",{});var J=A(C);i=d(J,"LABEL",{for:!0,"data-svelte-h":!0}),x(i)!=="svelte-1wr0xay"&&(i.textContent=tt),G=k(J),I=d(J,"INPUT",{id:!0,name:!0,type:!0}),J.forEach(w),K=k(f),S=d(f,"DIV",{});var W=A(S);M=d(W,"LABEL",{for:!0,"data-svelte-h":!0}),x(M)!=="svelte-q3ee2c"&&(M.textContent=et),Q=k(W),T=d(W,"INPUT",{id:!0,name:!0,type:!0}),W.forEach(w),X=k(f),R=d(f,"DIV",{});var lt=A(R);D=d(lt,"INPUT",{type:!0,class:!0}),lt.forEach(w),f.forEach(w),Y=k(m),F=d(m,"FORM",{method:!0,action:!0});var nt=A(F);q=d(nt,"DIV",{});var rt=A(q);O=d(rt,"BUTTON",{class:!0});var st=A(O);Z=ht(st,"Sign Out"),st.forEach(w),rt.forEach(w),nt.forEach(w),m.forEach(w),this.h()},h(){var o,m,f;n(r,"for","email"),n(a,"id","email"),n(a,"type","text"),a.value=_=t[1].user.email,a.disabled=!0,n(L,"for","fullName"),n(b,"id","fullName"),n(b,"name","fullName"),n(b,"type","text"),b.value=N=((o=t[0])==null?void 0:o.fullName)??t[4],n(i,"for","username"),n(I,"id","username"),n(I,"name","username"),n(I,"type","text"),I.value=H=((m=t[0])==null?void 0:m.username)??t[5],n(M,"for","website"),n(T,"id","website"),n(T,"name","website"),n(T,"type","url"),T.value=j=((f=t[0])==null?void 0:f.website)??t[6],n(D,"type","submit"),n(D,"class","button block primary"),D.value=z=t[3]?"Loading...":"Update",D.disabled=t[3],n(e,"class","form-widget"),n(e,"method","post"),n(e,"action","?/update"),n(O,"class","button block"),O.disabled=t[3],n(F,"method","post"),n(F,"action","?/signout"),n(s,"class","form-widget")},m(o,m){_t(o,s,m),l(s,e),l(e,p),l(p,r),l(p,h),l(p,a),l(e,y),l(e,g),l(g,L),l(g,E),l(g,b),l(e,c),l(e,C),l(C,i),l(C,G),l(C,I),l(e,K),l(e,S),l(S,M),l(S,Q),l(S,T),l(e,X),l(e,R),l(R,D),t[10](e),l(s,Y),l(s,F),l(F,q),l(q,O),l(O,Z),$||(at=[it(dt.call(null,e,t[7])),it(dt.call(null,F,t[8]))],$=!0)},p(o,[m]){var f,P,V;m&2&&_!==(_=o[1].user.email)&&a.value!==_&&(a.value=_),m&1&&N!==(N=((f=o[0])==null?void 0:f.fullName)??o[4])&&b.value!==N&&(b.value=N),m&1&&H!==(H=((P=o[0])==null?void 0:P.username)??o[5])&&I.value!==H&&(I.value=H),m&1&&j!==(j=((V=o[0])==null?void 0:V.website)??o[6])&&T.value!==j&&(T.value=j),m&8&&z!==(z=o[3]?"Loading...":"Update")&&(D.value=z),m&8&&(D.disabled=o[3]),m&8&&(O.disabled=o[3])},i:ot,o:ot,d(o){o&&w(s),t[10](null),$=!1,ct(at)}}}function Ct(t,s,e){let{data:p}=s,{form:r}=s,{session:v,supabase:h,profile:a}=p,_,y=!1,g=(a==null?void 0:a.full_name)??"",L=(a==null?void 0:a.username)??"",B=(a==null?void 0:a.website)??"";a==null||a.avatar_url;const E=()=>(e(3,y=!0),async()=>{e(3,y=!1)}),b=()=>(e(3,y=!0),async({update:c})=>{e(3,y=!1),c()});function N(c){ft[c?"unshift":"push"](()=>{_=c,e(2,_)})}return t.$$set=c=>{"data"in c&&e(9,p=c.data),"form"in c&&e(0,r=c.form)},t.$$.update=()=>{t.$$.dirty&512&&e(1,{session:v,supabase:h,profile:a}=p,v)},[r,v,_,y,g,L,B,E,b,p,N]}class kt extends pt{constructor(s){super(),bt(this,s,Ct,Nt,mt,{data:9,form:0})}}export{kt as component};
